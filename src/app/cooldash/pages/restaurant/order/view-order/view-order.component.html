<div class="container-fluid" *ngIf="orderDetail">
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="m-0 font-weight-bold text-primary">View Order</h6>
                        </div>
                        <div class="col-md-6 text-right">
                            <button class="btn btn-primary" (click)="history.back()">
                                <span class="fas fa-arrow-left"></span> Back
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div *ngIf="orderDetail">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Order Number</label>
                            <input type="text" name="Name" value="{{orderDetail.orderNo}}" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>User Name</label>
                            <input *ngIf="orderDetail.userId" type="text" name="Name" [value]="orderDetail.userId.firstName +' '+ orderDetail.userId.lastName" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Restaurant Address</label>
                            <textarea *ngIf="orderDetail.outletId" type="text" name="Name" class="form-control" disabled>{{ orderDetail.outletId.address}}
                                </textarea>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label *ngIf="orderDetail.address">User Address</label>
                            <textarea *ngIf="orderDetail.address" type="text" name="Name" class="form-control" disabled>{{ orderDetail.address.address}}
                                </textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Restaurant Name</label>
                            <input type="text" name="name" [value]="orderDetail.restaurantId.name" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Prepration Time</label>
                            <input type="text" name="discount" [value]="orderDetail.preprationTime" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Delivery Charges</label>
                            <input type="text" name="charge" [value]="orderDetail.deliveryFee" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Total Discount</label>
                            <input type="text" name="discount" [value]="orderDetail.totalDiscount" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="orderDetail.couponCode && orderDetail.couponDiscount ">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Coupon Code</label>
                            <input type="text" name="charge" [value]="orderDetail.startTime" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Coupon Discount</label>
                            <input type="text" name="discount" [value]="orderDetail.endTime" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Sub Total Amount</label>
                            <input type="text" name="subtotal" [value]="orderDetail.subTotalAmount" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Total Amount</label>
                            <input type="text" name="totalamount" [value]="orderDetail.totalAmount" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Payment Mode</label>
                            <input type="text" name="mode" [value]="orderDetail.paymentMode" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Order Date</label>
                            <input type="text" name="date" [value]="orderDetail.date | date: 'yyyy-MM-dd'" class="form-control" disabled />
                        </div>
                    </div>
                    <!-- <div class="col-md-6">
                        <div class="form-group">
                            <label>Tax</label>
                            <input type="text" name="open-time" [value]="orderDetail.tax" class="form-control"
                                disabled />
                        </div>
                    </div> -->
                </div>
                <div class="row" *ngIf="orderDetail?.deliveryDate">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Delivery Date</label>
                            <input type="text" name="deliveryDate" [value]="orderDetail.deliveryDate" class="form-control" disabled />
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="startflex">
                            <div class="form-group">
                                <div class="cont1">
                                    <label>Restaurant Review</label>
                                    <div class="stars">
                                        <ngx-star-rating [rating]="orderDetail?.restaurantRating" [id]="'rating'" [disabled]="true"></ngx-star-rating>
                                    </div>
                                </div>
                                <textarea type="text" name="subtotal" [value]="(orderDetail?.restaurantReview)?orderDetail?.restaurantReview:''" class="form-control" disabled></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-6" *ngIf="orderDetail?.deliveryDate">
                        <div class="startflex">
                            <div class="form-group">
                                <div class="cont1">
                                    <label>Driver Rating</label>
                                    <div class="stars">
                                        <ngx-star-rating [rating]="orderDetail?.driverRating" [id]="'rating'" [disabled]="true"></ngx-star-rating>
                                    </div>
                                </div>
                                <!-- <textarea type="text" name="subtotal" [value]="orderDetail?.restaurantReview" class="form-control" disabled></textarea> -->
                            </div>
                        </div>
                    </div>

                    <div class="card-body table-body">
                        <h3>Order Items</h3>
                        <div class="table-responsive">
                            <table class="table table-bordered" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th style="min-width: 5rem;">Name</th>
                                        <th style="min-width: 11rem;">Image</th>
                                        <th style="min-width: 7rem;">Add Ons (Name & Amount)</th>
                                        <th style="min-width: 7rem;">Quantity</th>
                                        <th style="min-width: 7rem;">Amount</th>
                                        <th style="min-width: 7rem;">Total Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of orderDetail.items; let i = index">
                                        <td>
                                            {{i+1}}
                                        </td>
                                        <td>
                                            {{item.itemId.name}}
                                        </td>
                                        <td>
                                            <img src="{{imageUrl}}{{item.itemId.image}}"/>
                                        </td>
                                        <td style="max-height: 120px;
                                        overflow-y: auto;
                                        display: list-item;">
                                            <div *ngFor="let addOn of item.addOn">
                                                {{item.addOn && item.addOn.length ?  addOn.name + ': ' + addOn.amount : '--'}}
                                            </div>
                                            <div *ngIf="item.addOn && !item.addOn.length">
                                                0
                                            </div>
                                        </td>
                                        <td>
                                            {{item.quantity}}
                                        </td>
                                        <td>
                                            {{item.amount}}
                                        </td>
                                        <td>
                                            {{item.totalAmount}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <h4 *ngIf="orderDetail.items && orderDetail.items.length == 0" class="text-center">
                                No records found.
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>