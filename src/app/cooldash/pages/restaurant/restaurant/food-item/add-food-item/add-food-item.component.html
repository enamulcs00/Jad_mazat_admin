<div class="container-fluid">
  <div class="card shadow mb-4">
    <div class="card-header py-3">
      <div class="tittle_outer">
        <div class="user_title">
          <div class="user_title_inner">
            <h6 class="m-0 text-black" *ngIf="!itemId">Add Food Item</h6>
            <h6 class="m-0 text-black" *ngIf="itemId">Edit Food Item</h6>
          </div>
          <div class="user_add_button">
            <button class="btn btn-primary" (click)="history.back()">
              <span class="fas fa-arrow-left"></span> Back
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="card-body">
      <form [formGroup]="restaurantForm">
        <div class="row">
          <div class="form-group col-md-6">
            <label for="title"><strong>Name: </strong></label>
            <div class="input-group">
              <input
                type="text"
                id="name"
                class="form-control"
                formControlName="name"
                placeholder=""
              />
            </div>
            <div
              *ngIf="submitted && restaurantForm.controls.name.errors"
              class="invalid-feedback"
            >
              <div *ngIf="restaurantForm.controls.name.errors.required">
                Name is required
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="types">Type of Food</label>
            <div class="input-group">
              <select class="form-control" formControlName="type" *ngIf="type">
                <option value="" selected disabled hidden>Choose here</option>
                <option *ngFor="let data of type" [value]="data.value">
                  {{ data.name }}
                </option>
              </select>
              <div
                *ngIf="submitted && restaurantForm.controls.type.errors"
                class="invalid-feedback"
              >
                <div *ngIf="restaurantForm.controls.type.errors.required">
                  Type of Food is required
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-12">
            <label for="body">Description</label>
            <div class="input-group">
              <textarea
                type="text"
                row="3"
                id="body"
                class="form-control"
                formControlName="description"
                placeholder=""
              ></textarea>
              <div
                *ngIf="submitted && restaurantForm.controls.description.errors"
                class="invalid-feedback"
              >
                <div
                  *ngIf="restaurantForm.controls.description.errors.required"
                >
                  Description is required
                </div>
                <div
                  *ngIf="restaurantForm.controls.description.errors.maxlength"
                >
                  Description can be max 250 characters long.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label for="price">Price</label>
            <div class="input-group">
              <input
                type="number"
                min="0"
                id="discount"
                appNumberOnly
                class="form-control"
                formControlName="price"
                placeholder=""
              />
              <div
                *ngIf="submitted && restaurantForm.controls.price.errors"
                class="invalid-feedback"
              >
                <div *ngIf="restaurantForm.controls.price.errors.required">
                  Price is required
                </div>
                <div *ngIf="restaurantForm.controls.price.errors.pattern">
                  Price is not valid
                </div>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="price"
              >Preparation Time<small> (In Minutes)</small></label
            >
            <div class="input-group">
              <input
                type="number"
                min="0"
                appNumberOnly
                id="preprationTime"
                class="form-control"
                formControlName="preprationTime"
                placeholder=""
              />
              <div
                *ngIf="
                  submitted && restaurantForm.controls.preprationTime.errors
                "
                class="invalid-feedback"
              >
                <div
                  *ngIf="restaurantForm.controls.preprationTime.errors.required"
                >
                  Preparation Time is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group col-md-6">
            <label for="price">Discount</label>
            <div class="input-group">
              <input type="number" min="0" id="discount" class="form-control" formControlName="discount"
                placeholder="" />
              <div *ngIf="submitted && restaurantForm.controls.discount.errors" class="invalid-feedback">
                <div *ngIf="restaurantForm.controls.discount.errors.required">
                  Discount is required
                </div>
                <div *ngIf="restaurantForm.controls.discount.errors.pattern">
                  Discount is not valid
                </div>
              </div>
            </div>
          </div> -->
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label for="types">Food Category</label>
            <div class="input-group">
              <select
                class="form-control"
                formControlName="foodTypeId"
                *ngIf="foodType"
              >
                <option value="" selected disabled hidden>Choose here</option>
                <option *ngFor="let type of foodType" [value]="type._id">
                  {{ type.name }}
                </option>
              </select>
              <div
                *ngIf="submitted && restaurantForm.controls.foodTypeId.errors"
                class="invalid-feedback"
              >
                <div *ngIf="restaurantForm.controls.foodTypeId.errors.required">
                  Food Category is required
                </div>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="category">Restaurant Category</label>
            <div
              class="input-group"
              *ngIf="categoryList && categoryList.length > 0"
            >
              <select
                class="form-control"
                formControlName="foodCategoryId"
                *ngIf="foodType"
              >
                <option value="" selected disabled hidden>Choose here</option>
                <option *ngFor="let type of categoryList" [value]="type._id">
                  {{ type.name }}
                </option>
              </select>
              <div
                *ngIf="
                  submitted && restaurantForm.controls.foodCategoryId.errors
                "
                class="invalid-feedback"
              >
                <div
                  *ngIf="restaurantForm.controls.foodCategoryId.errors.required"
                >
                  Restaurant Category is required
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <div class="usr_profile_img">
              <div class="usr_profile_imgbx">
                <label>Image</label>
                <div class="user_img">
                  <figure *ngIf="categoryImage">
                    <img
                      style="height: 150px; width: 150px"
                      [src]="categoryImage"
                    />
                  </figure>
                </div>
              </div>
              <div class="user_profile_edit">
                <input
                  type="file"
                  accept="image/*"
                  (change)="profilePic($event)"
                />
              </div>
              <div *ngIf="submitted && !categoryImage" class="invalid-feedback">
                Image is required
              </div>
            </div>
          </div>
        </div>
        <div class="form-group form-actions add_item">
          <button
            type="submit"
            class="btn btn-sm btn-success"
            *ngIf="!itemId"
            (click)="submit()"
          >
            Add
          </button>
          <button
            type="submit"
            class="btn btn-sm btn-success"
            *ngIf="itemId"
            (click)="update()"
          >
            Update
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
